# ======================================
# 必須設定
# ======================================

# Gemini APIキー（必須）
GEMINI_API_KEY=your_gemini_api_key_here

# FinancialModelingPrep APIキー（必須）
FMP_API_KEY=your_fmp_api_key_here

# 認証用6桁PIN（必須）
# デフォルト: 123456（本番環境では必ず変更してください）
AUTH_PIN=123487
SECRET_PIN=878787
URA_PIN=555777

# ======================================
# オプション設定
# ======================================

# Geminiモデル（固定）
GEMINI_MODEL=gemini-3-flash-preview

# Push通知の送信元メールアドレス（任意）
# デフォルト: admin@hanaview.local
VAPID_SUBJECT=mailto:your-email@example.com

# JWTトークン有効期限（日数、デフォルト: 30）
JWT_ACCESS_TOKEN_EXPIRE_DAYS=30

# 特別ティッカー設定（任意）
SPECIAL_TICKERS='{"2025/04/16": ["ASML", "(エーエスエムエル・ホールディングス)"]}'

# Hanaメモファイルのパス（任意）
HANA_MEMO_FILE=backend/hana-memo-202509.txt

# ======================================
# 自動生成される項目（設定不要）
# ======================================
# 以下は初回起動時に自動生成されます：
# - JWT_SECRET_KEY (JWTトークン署名用)
# - VAPID_PUBLIC_KEY (Push通知用公開鍵)
# - VAPID_PRIVATE_KEY (Push通知用秘密鍵)
#
# 生成されたキーは data/security_keys.json に保存されます。
# このファイルは必ずバックアップしてください！

# === 最適化版 HWB戦略設定 ===

# ルール①: トレンドフィルター
ENABLE_DYNAMIC_TREND_FILTER=true
WEEKLY_TREND_THRESHOLD=0.0      # 0%以上（緩和）
DAILY_MA_TOLERANCE=0.03         # 3%の許容範囲

# ルール②: セットアップ
SETUP_MODE="hybrid"              # primary + secondary
# 差分分析時のセットアップ検索範囲
SETUP_LOOKBACK_DAYS=30
ENABLE_ATR_DYNAMIC_ZONE=true
MIN_SETUP_QUALITY_SCORE=3

# ルール③: FVG検出
FVG_MIN_GAP_PERCENTAGE=0.001    # 0.1%（維持）
FVG_MAX_SEARCH_DAYS=20
ENABLE_VOLUME_CONFIRMATION=true
ENABLE_DYNAMIC_MA_PROXIMITY=true
MIN_FVG_SCORE=3

# ルール④: ブレイクアウト
BREAKOUT_MODE="adaptive"
MIN_BREAKOUT_SCORE=5
ENABLE_VOLUME_FILTER=true
ENABLE_MOMENTUM_FILTER=true

# シグナル管理
SIGNAL_COOLING_PERIOD=10        # 14→10日（やや短縮）
MAX_SIGNALS_PER_DAY=30
PRIORITY_THRESHOLD=0.7

# パフォーマンス
BATCH_SIZE=50
MAX_WORKERS=10
CACHE_EXPIRY_HOURS=24

# 市場適応
ENABLE_MARKET_REGIME_DETECTION=true
AUTO_ADJUST_PARAMETERS=true

# 初回スキャン開始位置（週足200MA計算に必要）
# 週足200本 ≈ 200週 × 5営業日 = 1000営業日
INITIAL_SCAN_MIN_HISTORY_DAYS=1000
